{% extends "layout.html" %}
{% block title %}Welcome - SmartEats{% endblock %}

{% block content %}

<style>
/* ===== Modern SmartEats Carousel with Overlay ===== */

/* Carousel Cards */
.se-carousel-card {
    max-width: 900px;
    margin: auto;
    border-radius: 1rem;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.se-carousel-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 20px rgba(0,0,0,0.25);
}

/* Image container */
.se-carousel-image-box {
    position: relative;
    height: 280px;
    background: linear-gradient(135deg, #fdfdfd, #f0f0f0);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.se-carousel-image-box img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
}

.se-carousel-image-box:hover img {
    transform: scale(1.05);
}

/* Overlay */
.se-carousel-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background: linear-gradient(to top, rgba(0,0,0,0.6), rgba(0,0,0,0));
    color: #fff;
    padding: 10px 15px;
    opacity: 0;
    transition: opacity 0.3s ease;
    font-size: 1rem;
    font-weight: 600;
}

.se-carousel-image-box:hover .se-carousel-overlay {
    opacity: 1;
}

/* Card Body */
.se-carousel-card .card-body {
    padding: 1rem;
    background: #ffffff;
}

/* Titles & Badges */
.se-carousel-card h5 {
    font-weight: 700;
    font-size: 1.1rem;
}

.se-carousel-card .badge {
    font-size: 0.85rem;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.se-carousel-card .badge:hover {
    transform: scale(1.1);
}

/* Carousel Controls with subtle shadow */
.carousel-control-prev-icon,
.carousel-control-next-icon {
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
}

/* Responsive tweaks */
@media (max-width: 768px) {
    .se-carousel-image-box {
        height: 200px;
    }
}

@media (max-width: 480px) {
    .se-carousel-card {
        border-radius: 0.5rem;
    }

    .se-carousel-image-box {
        height: 150px;
    }

    .se-carousel-card h5 {
        font-size: 1rem;
    }
}
</style>

<div class="container my-4">

  {# ================= ADS CAROUSEL ================= #}
  {% if ads %}
  <div id="adsCarousel"
       class="carousel slide carousel-fade mb-5"
       data-bs-ride="carousel"
       data-bs-interval="5000"
       data-bs-pause="hover">

    <div class="carousel-inner">
      {% for ad in ads %}
      <div class="carousel-item {% if loop.first %}active{% endif %}">
        <a class="text-decoration-none"
           href="{% if ad.link_type == 'product' %}
                   {{ url_for('main.product_detail', product_id=ad.product_id) }}
                 {% elif ad.link_type == 'store' %}
                   {{ url_for('main.go_to_store', store_id=ad.store_id) }}
                 {% else %}
                   {{ ad.external_url }}
                 {% endif %}">

          <div class="card shadow-sm border-0 se-carousel-card">
            <div class="se-carousel-image-box">
              <img src="{{ ad.image }}" alt="{{ ad.title }}">
              <div class="se-carousel-overlay">{{ ad.title }}</div>
            </div>

            <div class="card-body text-center">
              <span class="badge bg-success">Tap to view</span>
            </div>
          </div>

        </a>
      </div>
      {% endfor %}
    </div>

    <button class="carousel-control-prev" type="button"
            data-bs-target="#adsCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>

    <button class="carousel-control-next" type="button"
            data-bs-target="#adsCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
  {% endif %}

  {# ================= MEALS CAROUSEL ================= #}
  {% if meals %}
  <div id="mealsCarousel"
       class="carousel slide carousel-fade mb-5"
       data-bs-ride="carousel"
       data-bs-interval="5000"
       data-bs-pause="hover">

    <div class="carousel-inner">
      {% for meal in meals %}
      <div class="carousel-item {% if loop.first %}active{% endif %}">
        <a class="text-decoration-none"
           href="{{ url_for('main.viewproduct', product_id=meal.id) }}">

          <div class="card shadow-sm border-0 se-carousel-card">
            <div class="se-carousel-image-box">
              <img src="{{ meal.pictures }}" alt="{{ meal.productname }}">
              <div class="se-carousel-overlay">{{ meal.productname }}</div>
            </div>

            <div class="card-body text-center">
              {% if meal.price %}
                <div class="text-muted mb-1">{{ meal.price }}</div>
              {% endif %}

              {% if meal.store_name %}
                <small class="text-secondary">{{ meal.store_name }}</small>
              {% elif meal.store and meal.store.name %}
                <small class="text-secondary">{{ meal.store.name }}</small>
              {% endif %}

              <div class="mt-2">
                <span class="badge bg-success">Order</span>
              </div>
            </div>
          </div>

        </a>
      </div>
      {% endfor %}
    </div>

    <button class="carousel-control-prev" type="button"
            data-bs-target="#mealsCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>

    <button class="carousel-control-next" type="button"
            data-bs-target="#mealsCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
  {% endif %}

</div>

{% endblock %}